[TOC]
# 基本概念
## 调度层次
### 作业调度
又称高级调度：内存和辅存之间的调度。按一定的原则从外存上处于后背状态的作业中挑选一个(或多个)作业，分配内存、输入/输出设备等必要的资源，并建立相应的进程，从而获得竞争处理机的权利。作业调度的执行频率比较低。

### 内存调度
又称中级调度。引入**目的是为了提高内存利用率和系统吞吐量**。
将暂时不运行的进程调至外存，此时为挂起状态，当内存空间充足再调度回来，此时为就绪状态，等待获取cpu。

### 进程调度
又称低级调度。按照调度规则从内存中的就绪队列中选择一个进程，分配cpu。进程调度频率很高。

## 进程调度方式
### 非剥夺调度方式
又称非抢占方式。如果当前有一个进程正在cpu上进行，有其他任务进来，需要等待当前任务终止才能分配cpu给下一个进程。

### 剥夺调度方式
又称抢占方式。如果当前有一个进程正在cpu上进行，此时又其他任务进来，那么此时要暂停当前任务，将cpu分配给新的任务。

## 调度的基本准则
* CPU利用率：尽可能地使CPU处于繁忙状态。
* 系统吞吐量：单位时间内CPU完成作业的数量。
* 周转时间：指从作业提交到作业完成所经历的时间。
	* 带权周转时间：作业周转时间/作业实际运行时间
* 等待时间：指进程处于等待处理机状态时间之和。
* 响应时间：指用户提交请求到系统首次产生响应所用的时间。

## 经典的调度算法
### 先来先服务调度算法(FCFS)
顾名思义，就是按任务来的顺序处理任务。
适用范围：FCFS既可用于作业调度，也可用于进程调度。
调度方式：不可剥夺调度。
优点：算法简单；对长作业有利；利于CPU繁忙型作业。
缺陷：假设在队列前面有长作业，那么后面的短作业要等待很久才能执行，所以不能作为分时和实时系统的主要调度策略；效率低；对短作业不利；不利于I/O繁忙型作业。

### 短作业优先调度算法(SJF)
对短作业优先调度的算法。在进程调度里是短进程优先调度算法(SPF)。
适用范围：SJF适用于作业调度，SPF适用于进程调度。
调度方式：不可剥夺调度。
优点：利于短作业(进程)。
缺点：使长作业周转时间增加，甚至发生**饥饿**现象；不利于紧迫性作业；因为作业长短根据估计时间来定，所以不一定能真正做到短作业优先。

### 优先级调度算法
又称优先权调度算法。每次从队列中选择优先级最高的一个调入内存。
适用范围：既可用于作业调度，也可用于进程调度。
调度方式：非剥夺式或者剥夺式。
按优先级分类：静态优先级，优先级在创建进程时确定；动态优先级，根据进程的变化动态调整优先级，主要调整依据为进程占有CPU时间的长短、就绪进程等待CPU时间的长短。

### 高响应比优先调度算法
该算法是对FCFS和SJF的综合平衡，同时考虑每个作业的等待时间和估计的运行时间。
响应比=(等待时间+要求服务时间)/要求服务时间
特点：
当等待时间相同，要求服务时间越短，响应比越高，利于短作业；
当要求服务时间相同，作业的响应比由等待时间决定，属于先来先服务；
克服了饥饿现象：当长作业等待时间很久以后，响应比会升高，这样长作业也能的到处理。

### 时间片轮转算法
将所有进程按到达时间先后次序排个队，然后从第一个进程开始，每个进程运行一个时间片的时间然后继续下一个进程。
时间片长短决定因素：系统的响应时间、就绪队列中的进程数目和系统的处理能力。

### 多级反馈队列调度算法
结合时间片轮转算法和优先级调度算法，动态调整进程优先级和时间片大小，可以兼顾多方面的系统目标。
实现思想：

* 设置多个就绪队列，为每个队列赋予不同的优先级，从第一级往下逐渐降低。
* 不同优先级队列中进程执行时间片的大小也不同，队列的优先级越高，运行的时间片越小
* 当一个进程进入内存后，先放入第一级队列的末尾，按FCFS原则排队等待调度，当轮到的时候，如果能在时间片内完成，那么该任务可以撤离系统，否则放入下一级的队列末尾，直到某一级队列或者第n级队列
* 只有当上一级队列为空的时候，调度程序才调度下一级的进程。若处理机在执行第i级队列的某进程，有新的进程进入优先级更高的队列，那么此时新进程将抢占处理机，把正在运行的进程放到第i级队列末尾。

调度方式：抢占式。
优点：
终端型作业用户：短作业优先。
短批处理作业用户：周转时间较短。
长批处理作业用户：不会长期得不到处理。